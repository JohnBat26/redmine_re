<%= fields_for "artifact[re_use_case_steps_attributes][][re_use_case_expansions_attributes][]", re_use_case_expansion do |ex_form| %>
  <% type = re_use_case_expansion.re_expansion_type %>
  <tr id="use_case_step_expansion_<%= ex_form.id %>" class="use_case_expansion_row">
    <td>
      <%= ex_form.select :re_expansion_type, [ ['Exception', 1], ['Data',2], ['Other',3] ], :index => nil %>
    <td>
      <%= text_area :re_use_case_expansion, :description, { :size => "35x2", :index => nil,  :class => "use_case_step_textarea" } %>
    </td>
    <td>
      <% if re_use_case_expansion.new_record? %>
        <%= link_to_function t(:re_delete_use_case_expansion), "$(this).up('.use_case_expansion_row').remove()", :class => "icon icon-del" %>
      <% else %>
        <%= link_to_function t(:re_delete_use_case_expansion), "markExpansionForDeletion(this)", :class => "icon icon-del" %>
        <%= hidden_field(:re_use_case_expansion, :id, :index => nil) %>
        <%= hidden_field(:re_use_case_expansion, :_destroy, :index => nil, :class => "should_destroy") %>
      <% end %>
    </td>
  </tr>
<% end %>
