<div id='detail_view' class='detail_view'>
<h2><%= l(:re_task) %></h2>

<%= error_messages_for :re_task %>


<% form_for :re_task, :url => {:action => "edit"}, :html => { :style => "margin:0;padding:0;display:inline" } do |f| %>
    <%= hidden_field_tag :project_id, @project.id %>
    <%= hidden_field_tag :parent_id, params[:parent_id] %>
    
    <%= render "re_artifact_properties/shared_fields", :f => f, :properties => @re_task.re_artifact_properties %>
    <%= submit_tag l(:re_save) %>

    <p>
      <% if @subtasks.size == 0 %>
            <%= link_to_remote "Add Subtask", :url => {:action => "add_subtask", :add_position => :after} %>
     <% end %>
    </p>

    <div id="subtasks" >
        <%= render :partial => 're_subtask', :collection => @subtasks %>
    </div>
    <%= sortable_element "subtasks",
                          :tag => 'div',
                          :complete => visual_effect(:highlight, 'subtasks'),
                          :url => { :action => "update_subtask_positions" }
    %>

    <p>
    <%= submit_tag l(:re_save) %>
    </p>
<% end %>

<div class="manage_relationships">
    <%= render "re_artifact_properties/manage_relationships", :id => params[:id], :project_id => @project.id if params.has_key? :id  %>
</div>
  
</div>