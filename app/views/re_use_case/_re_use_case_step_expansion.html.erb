<% marker = re_use_case_step_expansion.id.to_s %>
<% if marker.blank? %>
	<% marker = "##marker##" %>
<% end%>
<%= fields_for "re_use_case_step_expansions[##use_case_step_id##]["+marker+"][]", re_use_case_step_expansion do |ex_form| %>
  <% type = re_use_case_step_expansion.re_expansion_type %>
  <tr id="use_case_step_expansion_drag_<%= ex_form.id %>" class="draggable use_case_step_expansion_row">
    <td>
      <%= select :re_use_case_step_expansions, "##use_case_step_id##]["+marker+"][][re_expansion_type", [ ['Exception', 1], ['Data',2], ['Other',3] ], :selected => '2' %>
    <td>
      <%= ex_form.text_area :description, { :size => "35x2", :index => nil,  :class => "use_case_step_textarea" } %>
    </td>
    <td>
      <% if re_use_case_step_expansion.new_record? %>
        <%= link_to_function t(:re_delete_use_case_step_expansion), "$(this).up('.use_case_step_expansion_row').remove()", :class => "icon icon-del" %>
      <% else %>
        <%= link_to_function t(:re_delete_use_case_step_expansion), "markExpansionForDeletion(this)", :class => "icon icon-del" %>
        <%= ex_form.hidden_field(:id, :index => nil) %>
        <%= ex_form.hidden_field(:_destroy, :index => nil, :class => "should_destroy") %>
      <% end %>
      <%= ex_form.hidden_field(:use_case_step_id, :class => "use_case_step_id", :index => nil, :value => "##use_case_step_id##") %>
      <%= ex_form.hidden_field :position, :index => nil, :class => "position" %>
    </td>
  </tr>
<% end %>

