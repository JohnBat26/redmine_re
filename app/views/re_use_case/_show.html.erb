<%	      
  goal_levels = {
  "5" => t(:re_use_case_abstract_overview),
  "4" => t(:re_use_case_overview),
  "3" => t(:re_use_case_user_goal),
  "2" => t(:re_use_case_function),
  "1" => t(:re_use_case_low)}
		          
%>

<p><strong>Level</strong>: <%= goal_levels[@re_artifact_properties.artifact[:goal_level].to_s]  %></p>
<p><strong>Trigger</strong>:  <%= @re_artifact_properties.artifact[:trigger] %></p>
<p><strong>Precondition</strong>: <%= @re_artifact_properties.artifact[:precondition] %></p>
<p><strong>Postcondition</strong>: <%= @re_artifact_properties.artifact[:postcondition] %></p>

<hr />

<fieldset>
	<legend><strong><%= t(:re_use_case_steps)%></strong></legend>
	
	<table>
	    <thead>
	      <tr>
	        <th>&nbsp;</th>
	        <th style="width: 300px;"><%= t(:re_user_steps) %></th>
	        <th style="width: 300px;"><%= t(:re_system_steps) %></th>
	      </tr>
	    </thead>
	    <tbody>
			<% counter_steps = 1 %>
		    <% @re_artifact_properties.artifact.re_use_case_steps.each do |current_re_use_case_step| %>
		    	<% if ( current_re_use_case_step.step_type == 2 ) %>
		          <tr>
		          	<td><%= counter_steps.to_s %> <%= image_tag('icons/monitor.png', :plugin => 'redmine_re', :alt => t(:re_uc_system)) %></td>
		          	<td>&nbsp;</td>
		          	<td><%= current_re_use_case_step.description %></td>
		         </tr>
		        <% else %>
		          <tr>
		          	<td><%= counter_steps.to_s %> <%= image_tag('icons/user.png', :plugin => 'redmine_re', :alt => t(:re_uc_system)) %></td>
		          	<td>
		          		<%= current_re_use_case_step.description %>
		          	</td>	
		          	<td>&nbsp;</td> 
		         </tr>
		        <% end %>
		        <% counter_steps = counter_steps + 1 %>
		    <% end %>
	    </tbody>
	</table>
	
	<% unless @re_artifact_properties.artifact.re_use_case_steps.blank? %>
		<hr />
		<table>
			<tr>
				<th colspan="2"><%= t(:re_expansions) %></th>
			</tr>
			<% counter_steps = 1 %>
			<% @re_artifact_properties.artifact.re_use_case_steps.each do |current_re_use_case_step| %>
				<% counter_expansions = 1 %>
				<% unless current_re_use_case_step.re_use_case_step_expansions.blank? %>
			    	<% current_re_use_case_step.re_use_case_step_expansions.each do |current_re_use_case_step_expansion| %>
						<tr>
							<td><%= counter_steps %>.<%= counter_expansions %></td>
							<td><%= current_re_use_case_step_expansion.description %></td>
						</tr>
						<% counter_expansions = counter_expansions + 1 %>
					<% end %>
				<% end %>
				<% counter_steps = counter_steps + 1 %>
			<% end %>
		</table>
	<% end %>
</fieldset>